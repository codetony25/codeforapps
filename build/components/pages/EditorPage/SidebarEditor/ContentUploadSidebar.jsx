'use strict';exports.__esModule=true;var _assign=require('babel-runtime/core-js/object/assign');var _assign2=_interopRequireDefault(_assign);var _getPrototypeOf=require('babel-runtime/core-js/object/get-prototype-of');var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=require('babel-runtime/helpers/classCallCheck');var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require('babel-runtime/helpers/createClass');var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=require('babel-runtime/helpers/possibleConstructorReturn');var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=require('babel-runtime/helpers/inherits');var _inherits3=_interopRequireDefault(_inherits2);var _class,_temp,_jsxFileName='components/pages/EditorPage/SidebarEditor/ContentUploadSidebar.jsx';var _react=require('react');var _react2=_interopRequireDefault(_react);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ContentUploadSidebar=(_temp=_class=function(_React$Component){(0,_inherits3.default)(ContentUploadSidebar,_React$Component);function ContentUploadSidebar(props){(0,_classCallCheck3.default)(this,ContentUploadSidebar);var _this=(0,_possibleConstructorReturn3.default)(this,(ContentUploadSidebar.__proto__||(0,_getPrototypeOf2.default)(ContentUploadSidebar)).call(this,props));_this.resetState=function(){return _this.__resetState__REACT_HOT_LOADER__.apply(_this,arguments)};_this.handleImageChange=function(){return _this.__handleImageChange__REACT_HOT_LOADER__.apply(_this,arguments)};_this.renderAction=function(){return _this.__renderAction__REACT_HOT_LOADER__.apply(_this,arguments)};_this.state={imageUploading:false,imageUploaded:false,imageError:''};_this.initialState=(0,_assign2.default)({},_this.state);console.warn('Image Manager is not complete.');console.warn('Image Manager is simulating longer upload.');return _this}(0,_createClass3.default)(ContentUploadSidebar,[{key:'__resetState__REACT_HOT_LOADER__',value:function __resetState__REACT_HOT_LOADER__(){return this.__resetState__REACT_HOT_LOADER__.apply(this,arguments)}},{key:'__resetState__REACT_HOT_LOADER__',value:function __resetState__REACT_HOT_LOADER__(){this.setState(this.initialState)}},{key:'__handleImageChange__REACT_HOT_LOADER__',value:function __handleImageChange__REACT_HOT_LOADER__(){return this.__handleImageChange__REACT_HOT_LOADER__.apply(this,arguments)}},{key:'__handleImageChange__REACT_HOT_LOADER__',value:function __handleImageChange__REACT_HOT_LOADER__(event){var _this2=this;this.setState({imageError:'',imageUploading:true});var reader=new FileReader;var file=event.target.files[0];if(!file||!file.name||!file.name.toLowerCase().includes('.png',file.name.length-4)){this.setState({imageError:'This is not an image file.',imageUploading:false});return}reader.onloadend=function(){Meteor.call('saveImage',reader.result,function(err){if(err){console.log('error from saveImage')}_this2.setState({imageUploaded:true,imageUploading:false})})};setTimeout(function(){reader.readAsDataURL(file)},4000)}},{key:'__renderAction__REACT_HOT_LOADER__',value:function __renderAction__REACT_HOT_LOADER__(){return this.__renderAction__REACT_HOT_LOADER__.apply(this,arguments)}},{key:'__renderAction__REACT_HOT_LOADER__',value:function __renderAction__REACT_HOT_LOADER__(){if(this.state.imageUploading){return _react2.default.createElement('div',{__source:{fileName:_jsxFileName,lineNumber:68}},'Loading spinner')}if(this.state.imageUploaded){return _react2.default.createElement('div',{__source:{fileName:_jsxFileName,lineNumber:75}},'Your image was uploaded.',_react2.default.createElement('div',{__source:{fileName:_jsxFileName,lineNumber:77}},_react2.default.createElement('button',{onClick:this.resetState,__source:{fileName:_jsxFileName,lineNumber:78}},'Upload Another Image')))}return _react2.default.createElement('form',{enctype:'multipart/form-data',onSubmit:this.handleImageSubmit,__source:{fileName:_jsxFileName,lineNumber:88}},_react2.default.createElement('span',{className:'image-error',__source:{fileName:_jsxFileName,lineNumber:92}},this.state.imageError),_react2.default.createElement('input',{type:'file',name:'displayImage',onChange:this.handleImageChange,__source:{fileName:_jsxFileName,lineNumber:95}}))}},{key:'render',value:function render(){console.log('Rendering ContentUploadSidebar');return _react2.default.createElement('div',{className:'sidebar-content-upload-container',__source:{fileName:_jsxFileName,lineNumber:107}},_react2.default.createElement('h3',{__source:{fileName:_jsxFileName,lineNumber:108}},'Book Image Manager'),this.renderAction(),_react2.default.createElement('div',{className:'sidebar-content-block',__source:{fileName:_jsxFileName,lineNumber:110}},_react2.default.createElement('img',{src:'/images/books/1.png',__source:{fileName:_jsxFileName,lineNumber:111}}),_react2.default.createElement('p',{__source:{fileName:_jsxFileName,lineNumber:112}},'myfile.png')),_react2.default.createElement('div',{className:'sidebar-content-block',__source:{fileName:_jsxFileName,lineNumber:114}},_react2.default.createElement('img',{src:'/images/books/1.png',__source:{fileName:_jsxFileName,lineNumber:115}}),_react2.default.createElement('p',{__source:{fileName:_jsxFileName,lineNumber:116}},'myfile.png')))}}]);return ContentUploadSidebar}(_react2.default.Component),_class.displayName='ContentUploadSidebar',_temp);var _default=ContentUploadSidebar;exports.default=_default;;var _temp2=function(){if(typeof __REACT_HOT_LOADER__==='undefined'){return}__REACT_HOT_LOADER__.register(ContentUploadSidebar,'ContentUploadSidebar','components/pages/EditorPage/SidebarEditor/ContentUploadSidebar.jsx');__REACT_HOT_LOADER__.register(_default,'default','components/pages/EditorPage/SidebarEditor/ContentUploadSidebar.jsx')}();;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvbnRlbnRVcGxvYWRTaWRlYmFyLmpzeCJdLCJuYW1lcyI6WyJDb250ZW50VXBsb2FkU2lkZWJhciIsInByb3BzIiwicmVzZXRTdGF0ZSIsImhhbmRsZUltYWdlQ2hhbmdlIiwicmVuZGVyQWN0aW9uIiwic3RhdGUiLCJpbWFnZVVwbG9hZGluZyIsImltYWdlVXBsb2FkZWQiLCJpbWFnZUVycm9yIiwiaW5pdGlhbFN0YXRlIiwiY29uc29sZSIsIndhcm4iLCJzZXRTdGF0ZSIsImV2ZW50IiwicmVhZGVyIiwiRmlsZVJlYWRlciIsImZpbGUiLCJ0YXJnZXQiLCJmaWxlcyIsIm5hbWUiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwibGVuZ3RoIiwib25sb2FkZW5kIiwiTWV0ZW9yIiwiY2FsbCIsInJlc3VsdCIsImVyciIsImxvZyIsInNldFRpbWVvdXQiLCJyZWFkQXNEYXRhVVJMIiwiaGFuZGxlSW1hZ2VTdWJtaXQiLCJDb21wb25lbnQiLCJkaXNwbGF5TmFtZSJdLCJtYXBwaW5ncyI6Ijg0QkFBQSw0QixnSUFFTUEscUIsd0dBSUosOEJBQVlDLEtBQVosQ0FBbUIsK01BQ1hBLEtBRFcsU0FjbkJDLFVBZG1CLHdGQWtCbkJDLGlCQWxCbUIsK0ZBMERuQkMsWUExRG1CLG9GQUdqQixNQUFLQyxLQUFMLENBQWEsQ0FDWEMsZUFBZ0IsS0FETCxDQUVYQyxjQUFlLEtBRkosQ0FHWEMsV0FBWSxFQUhELENBQWIsQ0FLQSxNQUFLQyxZQUFMLENBQW9CLHFCQUFjLEVBQWQsQ0FBa0IsTUFBS0osS0FBdkIsQ0FBcEIsQ0FFQUssUUFBUUMsSUFBUixDQUFhLGdDQUFiLEVBQ0FELFFBQVFDLElBQVIsQ0FBYSw0Q0FBYixFQVhpQixZQVlsQixDLHdTQUVrQixDQUNqQixLQUFLQyxRQUFMLENBQWMsS0FBS0gsWUFBbkIsQ0FDRCxDLDRSQUVvQkksSyxDQUFVLGlCQUM3QixLQUFLRCxRQUFMLENBQWMsQ0FDWkosV0FBWSxFQURBLENBRVpGLGVBQWdCLElBRkosQ0FBZCxFQUlBLEdBQU1RLFFBQVMsR0FBSUMsV0FBbkIsQ0FDQSxHQUFNQyxNQUFPSCxNQUFNSSxNQUFOLENBQWFDLEtBQWIsQ0FBbUIsQ0FBbkIsQ0FBYixDQUdBLEdBQ0UsQ0FBQ0YsSUFBRCxFQUNBLENBQUNBLEtBQUtHLElBRE4sRUFFQSxDQUFDSCxLQUFLRyxJQUFMLENBQVVDLFdBQVYsR0FBd0JDLFFBQXhCLENBQWlDLE1BQWpDLENBQXlDTCxLQUFLRyxJQUFMLENBQVVHLE1BQVYsQ0FBaUIsQ0FBMUQsQ0FISCxDQUlFLENBQ0EsS0FBS1YsUUFBTCxDQUFjLENBQ1pKLFdBQVksNEJBREEsQ0FFWkYsZUFBZ0IsS0FGSixDQUFkLEVBSUEsTUFDRCxDQUdEUSxPQUFPUyxTQUFQLENBQW1CLFVBQU0sQ0FDdkJDLE9BQU9DLElBQVAsQ0FBWSxXQUFaLENBQXlCWCxPQUFPWSxNQUFoQyxDQUF3QyxTQUFDQyxHQUFELENBQVMsQ0FDL0MsR0FBSUEsR0FBSixDQUFTLENBQ1BqQixRQUFRa0IsR0FBUixDQUFZLHNCQUFaLENBQ0QsQ0FDRCxPQUFLaEIsUUFBTCxDQUFjLENBQ1pMLGNBQWUsSUFESCxDQUVaRCxlQUFnQixLQUZKLENBQWQsQ0FJRCxDQVJELENBU0QsQ0FWRCxDQWFBdUIsV0FBVyxVQUFNLENBQ2ZmLE9BQU9nQixhQUFQLENBQXFCZCxJQUFyQixDQUNELENBRkQsQ0FFRyxJQUZILENBR0QsQyxvUUFFb0IsQ0FDbkIsR0FBSSxLQUFLWCxLQUFMLENBQVdDLGNBQWYsQ0FBK0IsQ0FDN0IsTUFDRSx3R0FJSCxDQUNELEdBQUksS0FBS0QsS0FBTCxDQUFXRSxhQUFmLENBQThCLENBQzVCLE1BQ0UsaUhBRUUscUZBQ0Usd0NBQVEsUUFBUyxLQUFLTCxVQUF0Qix3RUFERixDQUZGLENBU0gsQ0FHRCxNQUNFLHVDQUNFLFFBQVEscUJBRFYsQ0FFRSxTQUFVLEtBQUs2QixpQkFGakIsaURBSUUsc0NBQU0sVUFBVSxhQUFoQixpREFDRyxLQUFLMUIsS0FBTCxDQUFXRyxVQURkLENBSkYsQ0FPRSx1Q0FDRSxLQUFLLE1BRFAsQ0FFRSxLQUFLLGNBRlAsQ0FHRSxTQUFVLEtBQUtMLGlCQUhqQixpREFQRixDQWNILEMsdUNBRVEsQ0FDUE8sUUFBUWtCLEdBQVIsQ0FBWSxnQ0FBWixFQUNBLE1BQ0Usc0NBQUssVUFBVSxrQ0FBZixrREFDRSwwR0FERixDQUVHLEtBQUt4QixZQUFMLEVBRkgsQ0FHRSxxQ0FBSyxVQUFVLHVCQUFmLGtEQUNFLHFDQUFLLElBQUkscUJBQVQsa0RBREYsQ0FFRSxpR0FGRixDQUhGLENBT0UscUNBQUssVUFBVSx1QkFBZixrREFDRSxxQ0FBSyxJQUFJLHFCQUFULGtEQURGLENBRUUsaUdBRkYsQ0FQRixDQWFILEMsaUNBckhnQyxnQkFBTTRCLFMsU0FFaENDLFcsQ0FBYyxzQixxQkF1SFJqQyxvQixvSUF6SFRBLG9CIiwiZmlsZSI6IkNvbnRlbnRVcGxvYWRTaWRlYmFyLmpzeCIsInNvdXJjZVJvb3QiOiIvVXNlcnMvdG9ueW5ndXllbi9Qcm9qZWN0cy9jb2RlZm9yYXBwcy90b29scyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmNsYXNzIENvbnRlbnRVcGxvYWRTaWRlYmFyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcblxuICBzdGF0aWMgZGlzcGxheU5hbWUgPSAnQ29udGVudFVwbG9hZFNpZGViYXInO1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGltYWdlVXBsb2FkaW5nOiBmYWxzZSxcbiAgICAgIGltYWdlVXBsb2FkZWQ6IGZhbHNlLFxuICAgICAgaW1hZ2VFcnJvcjogJydcbiAgICB9O1xuICAgIHRoaXMuaW5pdGlhbFN0YXRlID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5zdGF0ZSk7XG5cbiAgICBjb25zb2xlLndhcm4oJ0ltYWdlIE1hbmFnZXIgaXMgbm90IGNvbXBsZXRlLicpO1xuICAgIGNvbnNvbGUud2FybignSW1hZ2UgTWFuYWdlciBpcyBzaW11bGF0aW5nIGxvbmdlciB1cGxvYWQuJyk7XG4gIH1cblxuICByZXNldFN0YXRlID0gKCkgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUodGhpcy5pbml0aWFsU3RhdGUpO1xuICB9O1xuXG4gIGhhbmRsZUltYWdlQ2hhbmdlID0gKGV2ZW50KSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBpbWFnZUVycm9yOiAnJyxcbiAgICAgIGltYWdlVXBsb2FkaW5nOiB0cnVlXG4gICAgfSk7XG4gICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICBjb25zdCBmaWxlID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdO1xuXG4gICAgLy8gVE9ETzogVmFsaWRhdGlvblxuICAgIGlmIChcbiAgICAgICFmaWxlIHx8XG4gICAgICAhZmlsZS5uYW1lIHx8XG4gICAgICAhZmlsZS5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJy5wbmcnLCBmaWxlLm5hbWUubGVuZ3RoLTQpXG4gICAgKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgaW1hZ2VFcnJvcjogJ1RoaXMgaXMgbm90IGFuIGltYWdlIGZpbGUuJyxcbiAgICAgICAgaW1hZ2VVcGxvYWRpbmc6IGZhbHNlXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cblxuICAgIHJlYWRlci5vbmxvYWRlbmQgPSAoKSA9PiB7XG4gICAgICBNZXRlb3IuY2FsbCgnc2F2ZUltYWdlJywgcmVhZGVyLnJlc3VsdCwgKGVycikgPT4ge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yIGZyb20gc2F2ZUltYWdlJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgaW1hZ2VVcGxvYWRlZDogdHJ1ZSxcbiAgICAgICAgICBpbWFnZVVwbG9hZGluZzogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8gVE9ETzogUmVtb3ZlIHRoZSBzaW11bGF0aW9uXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcbiAgICB9LCA0MDAwKTtcbiAgfTtcblxuICByZW5kZXJBY3Rpb24gPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMuc3RhdGUuaW1hZ2VVcGxvYWRpbmcpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgTG9hZGluZyBzcGlubmVyXG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuc3RhdGUuaW1hZ2VVcGxvYWRlZCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICBZb3VyIGltYWdlIHdhcyB1cGxvYWRlZC5cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXt0aGlzLnJlc2V0U3RhdGV9PlxuICAgICAgICAgICAgICBVcGxvYWQgQW5vdGhlciBJbWFnZVxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBPdGhlcndpc2UgcmV0dXJuIHRoZSBpbWFnZSBmb3JtXG4gICAgcmV0dXJuIChcbiAgICAgIDxmb3JtXG4gICAgICAgIGVuY3R5cGU9XCJtdWx0aXBhcnQvZm9ybS1kYXRhXCJcbiAgICAgICAgb25TdWJtaXQ9e3RoaXMuaGFuZGxlSW1hZ2VTdWJtaXR9XG4gICAgICA+XG4gICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImltYWdlLWVycm9yXCI+XG4gICAgICAgICAge3RoaXMuc3RhdGUuaW1hZ2VFcnJvcn1cbiAgICAgICAgPC9zcGFuPlxuICAgICAgICA8aW5wdXRcbiAgICAgICAgICB0eXBlPVwiZmlsZVwiXG4gICAgICAgICAgbmFtZT1cImRpc3BsYXlJbWFnZVwiXG4gICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlSW1hZ2VDaGFuZ2V9XG4gICAgICAgIC8+XG4gICAgICA8L2Zvcm0+XG4gICAgKTtcbiAgfTtcblxuICByZW5kZXIoKSB7XG4gICAgY29uc29sZS5sb2coJ1JlbmRlcmluZyBDb250ZW50VXBsb2FkU2lkZWJhcicpO1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInNpZGViYXItY29udGVudC11cGxvYWQtY29udGFpbmVyXCI+XG4gICAgICAgIDxoMz5Cb29rIEltYWdlIE1hbmFnZXI8L2gzPlxuICAgICAgICB7dGhpcy5yZW5kZXJBY3Rpb24oKX1cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzaWRlYmFyLWNvbnRlbnQtYmxvY2tcIj5cbiAgICAgICAgICA8aW1nIHNyYz1cIi9pbWFnZXMvYm9va3MvMS5wbmdcIiAvPlxuICAgICAgICAgIDxwPm15ZmlsZS5wbmc8L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNpZGViYXItY29udGVudC1ibG9ja1wiPlxuICAgICAgICAgIDxpbWcgc3JjPVwiL2ltYWdlcy9ib29rcy8xLnBuZ1wiIC8+XG4gICAgICAgICAgPHA+bXlmaWxlLnBuZzwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ29udGVudFVwbG9hZFNpZGViYXI7XG4iXX0=