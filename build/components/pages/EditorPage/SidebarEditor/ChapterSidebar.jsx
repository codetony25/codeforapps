'use strict';exports.__esModule=true;var _assign=require('babel-runtime/core-js/object/assign');var _assign2=_interopRequireDefault(_assign);var _getPrototypeOf=require('babel-runtime/core-js/object/get-prototype-of');var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=require('babel-runtime/helpers/classCallCheck');var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require('babel-runtime/helpers/createClass');var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=require('babel-runtime/helpers/possibleConstructorReturn');var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=require('babel-runtime/helpers/inherits');var _inherits3=_interopRequireDefault(_inherits2);var _class,_temp,_initialiseProps,_jsxFileName='components/pages/EditorPage/SidebarEditor/ChapterSidebar.jsx';var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactDom=require('react-dom');var _reactSortableHoc=require('react-sortable-hoc');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ChapterSidebar=(_temp=_class=function(_React$Component){(0,_inherits3.default)(ChapterSidebar,_React$Component);function ChapterSidebar(props){(0,_classCallCheck3.default)(this,ChapterSidebar);var _this=(0,_possibleConstructorReturn3.default)(this,(ChapterSidebar.__proto__||(0,_getPrototypeOf2.default)(ChapterSidebar)).call(this,props));_initialiseProps.call(_this);_this.state={showSearch:true,searchTerm:''};return _this}(0,_createClass3.default)(ChapterSidebar,[{key:'__shouldComponentUpdate__REACT_HOT_LOADER__',value:function __shouldComponentUpdate__REACT_HOT_LOADER__(){return this.__shouldComponentUpdate__REACT_HOT_LOADER__.apply(this,arguments)}},{key:'__shouldComponentUpdate__REACT_HOT_LOADER__',value:function __shouldComponentUpdate__REACT_HOT_LOADER__(nextProps,nextState){return this.props.selectedChapter!==nextProps.selectedChapter||this.props.searchTerm!==nextProps.searchTerm||this.props.book.draft.chapterList.join('')!==nextProps.book.draft.chapterList.join('')||this.props.book.draft.chapters!==nextProps.book.draft.chapters}},{key:'__onSortEnd__REACT_HOT_LOADER__',value:function __onSortEnd__REACT_HOT_LOADER__(){return this.__onSortEnd__REACT_HOT_LOADER__.apply(this,arguments)}},{key:'__onSortEnd__REACT_HOT_LOADER__',value:function __onSortEnd__REACT_HOT_LOADER__(_ref){var oldIndex=_ref.oldIndex,newIndex=_ref.newIndex;var chapterList=(0,_reactSortableHoc.arrayMove)(this.props.book.draft.chapterList,oldIndex,newIndex);var draft=(0,_assign2.default)({},this.props.book.draft);draft.chapterList=chapterList;this.props.methods.saveDraft(draft)}},{key:'__handleSearchClick__REACT_HOT_LOADER__',value:function __handleSearchClick__REACT_HOT_LOADER__(){return this.__handleSearchClick__REACT_HOT_LOADER__.apply(this,arguments)}},{key:'__handleSearchClick__REACT_HOT_LOADER__',value:function __handleSearchClick__REACT_HOT_LOADER__(){this.setState({showSearch:!this.state.showSearch})}},{key:'__handleSearchInputChange__REACT_HOT_LOADER__',value:function __handleSearchInputChange__REACT_HOT_LOADER__(){return this.__handleSearchInputChange__REACT_HOT_LOADER__.apply(this,arguments)}},{key:'__handleSearchInputChange__REACT_HOT_LOADER__',value:function __handleSearchInputChange__REACT_HOT_LOADER__(event){this.setState({searchTerm:event.target.value})}},{key:'__renderSearch__REACT_HOT_LOADER__',value:function __renderSearch__REACT_HOT_LOADER__(){return this.__renderSearch__REACT_HOT_LOADER__.apply(this,arguments)}},{key:'__renderSearch__REACT_HOT_LOADER__',value:function __renderSearch__REACT_HOT_LOADER__(){var _this2=this;return this.state.showSearch?_react2.default.createElement('div',{className:'chapter-search',__source:{fileName:_jsxFileName,lineNumber:102}},_react2.default.createElement('input',{type:'text',placeholder:'Search book...',onChange:this.handleSearchInputChange,value:this.state.searchTerm,__source:{fileName:_jsxFileName,lineNumber:103}}),_react2.default.createElement('i',{className:'icon ion-ios-close-outline',onClick:function onClick(){return _this2.setState({searchTerm:''})},__source:{fileName:_jsxFileName,lineNumber:109}})):null}},{key:'render',value:function render(){var _this3=this;console.log('Rendering BookEditChapterSidebar');return _react2.default.createElement('div',{className:'sidebar-chapters-container',__source:{fileName:_jsxFileName,lineNumber:120}},this.renderSearch(),_react2.default.createElement(this.SortableList,{chapterList:this.props.book.draft.chapterList,onSortEnd:this.onSortEnd,useDragHandle:true,__source:{fileName:_jsxFileName,lineNumber:122}}),_react2.default.createElement('div',{className:'chapter-action-icons',__source:{fileName:_jsxFileName,lineNumber:127}},_react2.default.createElement('button',{className:'btn-success',onClick:function onClick(){return _this3.props.methods.handleCreateChapter()},__source:{fileName:_jsxFileName,lineNumber:128}},'NEW'),_react2.default.createElement('button',{className:'btn-danger',onClick:function onClick(){return _this3.props.methods.handleDeleteChapter()},__source:{fileName:_jsxFileName,lineNumber:134}},_react2.default.createElement('i',{className:'icon ion-trash-b',__source:{fileName:_jsxFileName,lineNumber:138}}))))}}]);return ChapterSidebar}(_react2.default.Component),_class.displayName='ChapterSidebar',_initialiseProps=function _initialiseProps(){var _this4=this;this.shouldComponentUpdate=function(){return _this4.__shouldComponentUpdate__REACT_HOT_LOADER__.apply(_this4,arguments)};this.DragHandle=(0,_reactSortableHoc.SortableHandle)(function(){return _react2.default.createElement('span',{__source:{fileName:_jsxFileName,lineNumber:41}},_react2.default.createElement('i',{className:'icon ion-drag',__source:{fileName:_jsxFileName,lineNumber:42}}))});this.SortableItem=(0,_reactSortableHoc.SortableElement)(function(props){return _react2.default.createElement('li',{className:props.clKey===_this4.props.selectedChapter?'highlight':'',onClick:function onClick(){return _this4.props.methods.handleSelectChapter(props.clKey)},__source:{fileName:_jsxFileName,lineNumber:47}},_react2.default.createElement(_this4.DragHandle,{__source:{fileName:_jsxFileName,lineNumber:51}}),_this4.props.book.draft.chapters[props.clKey].title)});this.SortableList=(0,_reactSortableHoc.SortableContainer)(function(_ref2){var chapterList=_ref2.chapterList;return _react2.default.createElement('ul',{className:'chapter-list',__source:{fileName:_jsxFileName,lineNumber:62}},chapterList.map(function(clKey,index){return _react2.default.createElement(_this4.SortableItem,{key:clKey,index:index,clKey:clKey,__source:{fileName:_jsxFileName,lineNumber:64}})}))});this.onSortEnd=function(){return _this4.__onSortEnd__REACT_HOT_LOADER__.apply(_this4,arguments)};this.handleSearchClick=function(){return _this4.__handleSearchClick__REACT_HOT_LOADER__.apply(_this4,arguments)};this.handleSearchInputChange=function(){return _this4.__handleSearchInputChange__REACT_HOT_LOADER__.apply(_this4,arguments)};this.renderSearch=function(){return _this4.__renderSearch__REACT_HOT_LOADER__.apply(_this4,arguments)}},_temp);var _default=ChapterSidebar;exports.default=_default;;var _temp2=function(){if(typeof __REACT_HOT_LOADER__==='undefined'){return}__REACT_HOT_LOADER__.register(ChapterSidebar,'ChapterSidebar','components/pages/EditorPage/SidebarEditor/ChapterSidebar.jsx');__REACT_HOT_LOADER__.register(_default,'default','components/pages/EditorPage/SidebarEditor/ChapterSidebar.jsx')}();;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNoYXB0ZXJTaWRlYmFyLmpzeCJdLCJuYW1lcyI6WyJDaGFwdGVyU2lkZWJhciIsInByb3BzIiwic3RhdGUiLCJzaG93U2VhcmNoIiwic2VhcmNoVGVybSIsIm5leHRQcm9wcyIsIm5leHRTdGF0ZSIsInNlbGVjdGVkQ2hhcHRlciIsImJvb2siLCJkcmFmdCIsImNoYXB0ZXJMaXN0Iiwiam9pbiIsImNoYXB0ZXJzIiwib2xkSW5kZXgiLCJuZXdJbmRleCIsIm1ldGhvZHMiLCJzYXZlRHJhZnQiLCJzZXRTdGF0ZSIsImV2ZW50IiwidGFyZ2V0IiwidmFsdWUiLCJoYW5kbGVTZWFyY2hJbnB1dENoYW5nZSIsImNvbnNvbGUiLCJsb2ciLCJyZW5kZXJTZWFyY2giLCJvblNvcnRFbmQiLCJoYW5kbGVDcmVhdGVDaGFwdGVyIiwiaGFuZGxlRGVsZXRlQ2hhcHRlciIsIkNvbXBvbmVudCIsImRpc3BsYXlOYW1lIiwic2hvdWxkQ29tcG9uZW50VXBkYXRlIiwiRHJhZ0hhbmRsZSIsIlNvcnRhYmxlSXRlbSIsImNsS2V5IiwiaGFuZGxlU2VsZWN0Q2hhcHRlciIsInRpdGxlIiwiU29ydGFibGVMaXN0IiwibWFwIiwiaW5kZXgiLCJoYW5kbGVTZWFyY2hDbGljayJdLCJtYXBwaW5ncyI6Ink1QkFBQSw0QiwyQ0FDQSxtQ0FDQSxvRCxxRkFPTUEsZSxrR0FJSix3QkFBWUMsS0FBWixDQUFtQiw2TEFDWEEsS0FEVyxnQ0FHakIsTUFBS0MsS0FBTCxDQUFhLENBQ1hDLFdBQVksSUFERCxDQUVYQyxXQUFZLEVBRkQsQ0FBYixDQUhpQixZQU9sQixDLHdWQVF3QkMsUyxDQUFXQyxTLFFBQ2xDLE1BQUtMLEtBQUwsQ0FBV00sZUFBWCxHQUErQkYsVUFBVUUsZUFBekMsRUFDQSxLQUFLTixLQUFMLENBQVdHLFVBQVgsR0FBMEJDLFVBQVVELFVBRHBDLEVBRUMsS0FBS0gsS0FBTCxDQUFXTyxJQUFYLENBQWdCQyxLQUFoQixDQUFzQkMsV0FBdEIsQ0FBa0NDLElBQWxDLENBQXVD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RDZCLENBQWhCLEMsTUFjZkMsWSxDQUFlLHdDQUFrQixlQUFxQixJQUFsQjFCLFlBQWtCLE9BQWxCQSxXQUFrQixDQUNwRCxNQUNFLHFDQUFJLFVBQVUsY0FBZCxpREFDR0EsWUFBWTJCLEdBQVosQ0FBZ0IsU0FBQ0osS0FBRCxDQUFRSyxLQUFSLFFBQ2Ysc0NBQU0sWUFBTixFQUFtQixJQUFLTCxLQUF4QixDQUErQixNQUFPSyxLQUF0QyxDQUE2QyxNQUFPTCxLQUFwRCxpREFEZSxDQUFoQixDQURILENBTUgsQ0FSYyxDLE1BYWZSLFMsd0ZBY0FjLGlCLGdHQU1BbEIsdUIsc0dBTUFHLFksMkdBZ0RheEIsYyxvSUF6SVRBLGMiLCJmaWxlIjoiQ2hhcHRlclNpZGViYXIuanN4Iiwic291cmNlUm9vdCI6Ii9Vc2Vycy90b255bmd1eWVuL0lkZWFQcm9qZWN0cy9jb2RlZm9yYXBwcy90b29scyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyByZW5kZXIgfSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IHtcbiAgU29ydGFibGVDb250YWluZXIsXG4gIFNvcnRhYmxlRWxlbWVudCxcbiAgU29ydGFibGVIYW5kbGUsXG4gIGFycmF5TW92ZVxufSBmcm9tICdyZWFjdC1zb3J0YWJsZS1ob2MnO1xuXG5jbGFzcyBDaGFwdGVyU2lkZWJhciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG5cbiAgc3RhdGljIGRpc3BsYXlOYW1lID0gJ0NoYXB0ZXJTaWRlYmFyJztcblxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcblxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBzaG93U2VhcmNoOiB0cnVlLFxuICAgICAgc2VhcmNoVGVybTogJydcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIE5vcm1hbGx5IHlvdSB3b3VsZG4ndCB3YW50IHRvIGpvaW4gYW4gYXJyYXkgYXMgYSBzdHJpbmcgYW5kIHRoZW4gY29tcGFyZVxuICAgKiB0aGUgc3RyaW5nIHRvIHNlZSBpZiB0aGUgYXJyYXkgaGFzIGNoYW5nZWQgKGJlY2F1c2Ugb2YgZW1wdHkgc3RyaW5ncyBhbmRcbiAgICogb3RoZXIgdmFyaW91cyByZWFzb25zKSBidXQgaW4gdGhpcyBjYXNlLCBzaW5jZSB3ZSBrbm93IGl0J3MgYSBoZXggc3RyaW5nXG4gICAqIGl0J3Mgb2tcbiAgICovXG4gIHNob3VsZENvbXBvbmVudFVwZGF0ZSA9IChuZXh0UHJvcHMsIG5leHRTdGF0ZSkgPT5cbiAgICB0aGlzLnByb3BzLnNlbGVjdGVkQ2hhcHRlciAhPT0gbmV4dFByb3BzLnNlbGVjdGVkQ2hhcHRlciB8fFxuICAgIHRoaXMucHJvcHMuc2VhcmNoVGVybSAhPT0gbmV4dFByb3BzLnNlYXJjaFRlcm0gfHxcbiAgICAodGhpcy5wcm9wcy5ib29rLmRyYWZ0LmNoYXB0ZXJMaXN0LmpvaW4oJycpICE9PVxuICAgIG5leHRQcm9wcy5ib29rLmRyYWZ0LmNoYXB0ZXJMaXN0LmpvaW4oJycpKSB8fFxuICAgIHRoaXMucHJvcHMuYm9vay5kcmFmdC5jaGFwdGVycyAhPT0gbmV4dFByb3BzLmJvb2suZHJhZnQuY2hhcHRlcnM7XG5cbiAgLyogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAqIFRoaXMgc2VjdGlvbiBvZiBjb21wb25lbnRzIGlzIGZvciBoYW5kbGluZyBkcmFnIGFuZCBkcm9wXG4gICAqL1xuXG4gIERyYWdIYW5kbGUgPSBTb3J0YWJsZUhhbmRsZSgoKSA9PlxuICAgIDxzcGFuPlxuICAgICAgPGkgY2xhc3NOYW1lPVwiaWNvbiBpb24tZHJhZ1wiIC8+XG4gICAgPC9zcGFuPlxuICApO1xuXG4gIFNvcnRhYmxlSXRlbSA9IFNvcnRhYmxlRWxlbWVudCgocHJvcHMpID0+XG4gICAgPGxpXG4gICAgICBjbGFzc05hbWU9e3Byb3BzLmNsS2V5ID09PSB0aGlzLnByb3BzLnNlbGVjdGVkQ2hhcHRlciA/ICdoaWdobGlnaHQnIDogJyd9XG4gICAgICBvbkNsaWNrPXsoKSA9PiB0aGlzLnByb3BzLm1ldGhvZHMuaGFuZGxlU2VsZWN0Q2hhcHRlcihwcm9wcy5jbEtleSl9XG4gICAgPlxuICAgICAgPHRoaXMuRHJhZ0hhbmRsZSAvPlxuICAgICAge3RoaXMucHJvcHMuYm9vay5kcmFmdC5jaGFwdGVyc1twcm9wcy5jbEtleV0udGl0bGV9XG4gICAgPC9saT5cbiAgKTtcblxuICAvKipcbiAgICogY2hhcHRlckxpc3QgaXMgYW4gYXJyYXkgb2YgdGhlIGlkIGtleXMgb2YgYWxsIHRoZSBjaGFwdGVycy5cbiAgICogY2xLZXkgLT4gY2hhcHRlckxpc3RLZXlcbiAgICovXG4gIFNvcnRhYmxlTGlzdCA9IFNvcnRhYmxlQ29udGFpbmVyKCh7IGNoYXB0ZXJMaXN0IH0pID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgPHVsIGNsYXNzTmFtZT1cImNoYXB0ZXItbGlzdFwiPlxuICAgICAgICB7Y2hhcHRlckxpc3QubWFwKChjbEtleSwgaW5kZXgpID0+XG4gICAgICAgICAgPHRoaXMuU29ydGFibGVJdGVtIGtleT17Y2xLZXl9IGluZGV4PXtpbmRleH0gY2xLZXk9e2NsS2V5fSAvPlxuICAgICAgICApfVxuICAgICAgPC91bD5cbiAgICApO1xuICB9KTtcblxuICAvKipcbiAgICogVGhpcyBpcyB3aGF0IGhhcHBlbnMgYWZ0ZXIgb3VyIGFycmF5cyBhcmUgZG9uZSBtb3ZpbmcuXG4gICAqL1xuICBvblNvcnRFbmQgPSAoeyBvbGRJbmRleCwgbmV3SW5kZXggfSkgPT4ge1xuICAgIC8vIFBlcmZvcm0gdGhlIHJlYXJyYW5nZW1lbnRcbiAgICBjb25zdCBjaGFwdGVyTGlzdCA9XG4gICAgICBhcnJheU1vdmUodGhpcy5wcm9wcy5ib29rLmRyYWZ0LmNoYXB0ZXJMaXN0LCBvbGRJbmRleCwgbmV3SW5kZXgpO1xuICAgIC8vIFVwZGF0ZSB0aGUgZHJhZnRcbiAgICBjb25zdCBkcmFmdCA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMucHJvcHMuYm9vay5kcmFmdCk7XG4gICAgZHJhZnQuY2hhcHRlckxpc3QgPSBjaGFwdGVyTGlzdDtcbiAgICB0aGlzLnByb3BzLm1ldGhvZHMuc2F2ZURyYWZ0KGRyYWZ0KTtcbiAgfTtcblxuICAvKipcbiAgICogRW5kIGRyYWcgYW5kIGRyb3AgZnVuY3Rpb25hbGl0eVxuICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgaGFuZGxlU2VhcmNoQ2xpY2sgPSAoKSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBzaG93U2VhcmNoOiAhdGhpcy5zdGF0ZS5zaG93U2VhcmNoXG4gICAgfSk7XG4gIH07XG5cbiAgaGFuZGxlU2VhcmNoSW5wdXRDaGFuZ2UgPSAoZXZlbnQpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHNlYXJjaFRlcm06IGV2ZW50LnRhcmdldC52YWx1ZVxuICAgIH0pO1xuICB9O1xuXG4gIHJlbmRlclNlYXJjaCA9ICgpID0+IHtcbiAgICByZXR1cm4gKHRoaXMuc3RhdGUuc2hvd1NlYXJjaCkgP1xuICAgICAgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNoYXB0ZXItc2VhcmNoXCI+XG4gICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlNlYXJjaCBib29rLi4uXCJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZVNlYXJjaElucHV0Q2hhbmdlfVxuICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUuc2VhcmNoVGVybX1cbiAgICAgICAgICAvPlxuICAgICAgICAgIDxpXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJpY29uIGlvbi1pb3MtY2xvc2Utb3V0bGluZVwiXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0aGlzLnNldFN0YXRlKHsgc2VhcmNoVGVybTogJycgfSl9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICApIDogbnVsbDtcbiAgfTtcblxuICByZW5kZXIoKSB7XG4gICAgY29uc29sZS5sb2coJ1JlbmRlcmluZyBCb29rRWRpdENoYXB0ZXJTaWRlYmFyJyk7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2lkZWJhci1jaGFwdGVycy1jb250YWluZXJcIj5cbiAgICAgICAge3RoaXMucmVuZGVyU2VhcmNoKCl9XG4gICAgICAgIDx0aGlzLlNvcnRhYmxlTGlzdFxuICAgICAgICAgIGNoYXB0ZXJMaXN0PXt0aGlzLnByb3BzLmJvb2suZHJhZnQuY2hhcHRlckxpc3R9XG4gICAgICAgICAgb25Tb3J0RW5kPXt0aGlzLm9uU29ydEVuZH1cbiAgICAgICAgICB1c2VEcmFnSGFuZGxlPXt0cnVlfVxuICAgICAgICAvPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNoYXB0ZXItYWN0aW9uLWljb25zXCI+XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnRuLXN1Y2Nlc3NcIlxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gdGhpcy5wcm9wcy5tZXRob2RzLmhhbmRsZUNyZWF0ZUNoYXB0ZXIoKX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICBORVdcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJidG4tZGFuZ2VyXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHRoaXMucHJvcHMubWV0aG9kcy5oYW5kbGVEZWxldGVDaGFwdGVyKCl9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiaWNvbiBpb24tdHJhc2gtYlwiIC8+XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IENoYXB0ZXJTaWRlYmFyO1xuIl19